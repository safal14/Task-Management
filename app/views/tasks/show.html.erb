<div class="container mt-3">

  <!-- Back Button (dynamic for role) -->
  <div class="mb-3">

      <%= link_to "â† Back to My Tasks", tasks_path, class: "btn btn-secondary" %>
  </div>

  <!-- Task Card -->
  <div class="card shadow-sm">
    <div class="card-body">

      <!-- Task Title -->
      <h3 class="card-title"><%= @task.title %></h3>

      <!-- Status -->
      <p class="text-muted">
        Status:
        <span class="badge bg-<%= @task.completed? ? 'success' : 'warning' %>">
          <%= @task.status.capitalize %>
        </span>
      </p>

      <!-- Description -->
      <p><strong>Description:</strong></p>
      <p><%= @task.description %></p>

      <!-- Due Date -->
      <p><strong>Due:</strong> <%= l(@task.due_date, format: :long) %></p>

      <hr>

      <!-- Assigned To Info -->
      <p><strong>Assigned To:</strong>
        <%= @task.assigned_to&.first_name || "N/A" %>
      </p>
              <strong>Assigned By:</strong>
        <%= @task.creator ? @task.creator.full_name : "Unknown" %>
      </p>

      <!-- Action Buttons (Edit / Mark Complete) -->
      <% if current_user == @task.assigned_to && @task.pending? %>
        <div class="d-flex">
          <%= link_to "Edit Task", edit_task_path(@task), class: "btn btn-warning me-2" %>
          <%= button_to "Mark as Complete",
                mark_complete_task_path(@task),
                method: :patch,
                class: "btn btn-success" %>
        </div>
      <% end %>

    </div>
<% if policy(@task).destroy? %>
  <%= button_to "Delete Task",
      task_path(@task),
      method: :delete,
      data: { confirm: "Are you sure you want to delete this task?" },
      class: "btn btn-danger" %>
<% end %>
  </div>
</div>
