<div class="container mt-4">
  <h2 class="mb-4">
    <%= current_user.admin? ? "All Tasks" : "My Tasks" %>
  </h2>

  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Title</th>
        <th>Status</th>
        <th>Assigned To</th>
        <th>Due Date</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <% @tasks.each do |task| %>
        <tr>
          <td><%= task.title %></td>
          <td>
            <span class="badge bg-<%= task.completed? ? 'success' : 'warning' %>">
              <%= task.status.capitalize %>
            </span>
          </td>
          <td><%= task.assigned_to&.full_name || "N/A" %></td>
          <td><%= l(task.due_date, format: :short) %></td>
          <td>
            <%= link_to "View", task_path(task), class: "btn btn-sm btn-outline-primary" %>
            <% if current_user.manager? && task.creator == current_user %>
              <%= link_to "Edit", edit_task_path(task), class: "btn btn-sm btn-warning" %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <% if current_user.manager? %>
    <%= link_to "Create New Task", new_task_path, class: "btn btn-success mt-3" %>
  <% end %>
</div>
